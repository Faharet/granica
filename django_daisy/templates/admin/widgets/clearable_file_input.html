{% load static %}

<div class="inline-block align-top min-w-[220px] w-100 max-w-full" data-clearable-file-widget data-widget-name="{{ widget.name }}">
  <div class="rounded-md border-2 border-dashed border-gray-200 p-3 bg-white">
    <div
      class="mb-3 w-full rounded-md bg-gray-50 flex items-center justify-center min-h-[120px] max-h-72 overflow-hidden relative"
      data-preview-area
      aria-live="polite"
    >

    
    <div class="w-full h-full flex items-center justify-center text-center text-sm text-gray-500 px-3" data-preview-empty>
        Перетащите файл сюда или выберите файл ниже
      </div>

      <div class="hidden w-full h-full" data-preview-content></div>
    </div>

    <div class="relative">
      {% include 'django/forms/widgets/file.html' %}
    </div>

    <input type="hidden" name="rotation-{{ widget.name }}" value="0" id="rotation-{{ widget.name }}" data-rotation-input>

    {% if not widget.required and widget.value %}
      <div class="mt-3 flex items-center gap-2 text-sm text-gray-600">
        <input type="checkbox"
               name="{{ widget.checkbox_name }}"
               id="{{ widget.checkbox_id }}"
               class="h-4 w-4 rounded border-gray-300"
               {% if widget.attrs.disabled %}disabled{% endif %}>
        <label for="{{ widget.checkbox_id }}">Очистить</label>
        <a class="ml-auto text-xs underline" target="_blank" href="{{ widget.value.url }}">{{ widget.value|truncatechars:40 }}</a>
      </div>
    {% endif %}

    {% if widget.is_initial and widget.value %}
      <div style="display:none;"
           data-initial-file
           data-initial-url="{{ widget.value.url }}"
           data-initial-name="{{ widget.value.name }}"
           data-initial-size="{{ widget.value.size|default:'' }}"
           data-initial-contenttype="{{ widget.value.content_type|default:'' }}"
      ></div>
    {% endif %}
  </div>
</div>

<script src="{% static 'admin/js/file-upload-preview.js' %}"></script>
